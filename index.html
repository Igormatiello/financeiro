<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Códigos</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="login-container" id="loginContainer">
    <h2>Login</h2>
    <form id="loginForm">
      <input type="text" id="loginUsuario" placeholder="Usuário" required autocomplete="username">
      <input type="password" id="loginSenha" placeholder="Senha" required autocomplete="current-password">
      <button type="submit">Entrar</button>
    </form>
    <div class="mensagem" id="loginMensagem"></div>
  </div>
  <div class="container" id="mainContainer" style="display:none;">
    <h1>Gerador de Códigos</h1>
    <div class="info-codigos">
      <div>
        <strong>Último código:</strong> <span id="ultimoCodigo">Carregando...</span>
        <button id="copiarUltimo" title="Copiar último código">📋</button>
      </div>
      <div>
        <strong>Próximo código:</strong> <span id="proximoCodigo">Carregando...</span>
        <button id="copiarProximo" title="Copiar próximo código">📋</button>
      </div>
    </div>
    <div class="botoes">
      <button id="gerarBtn">Gerar Próximo Código</button>
      <button id="resetarBtn">Resetar Sequência</button>
      <button id="abrirInserirManual">Inserir novo código manualmente</button>
    </div>
    <div id="inserirManualBox" style="display:none; margin-bottom:18px;">
      <form id="formInserirManual">
        <input type="text" id="codigoManual" placeholder="Novo código (ex: 0019000-99.2024.8.16.0021)" required style="width: 100%; margin-bottom: 8px;">
        <label style="margin-right: 10px;">
          <input type="radio" name="diminuiManual" value="15" checked> Próximo decremento: 15
        </label>
        <label>
          <input type="radio" name="diminuiManual" value="18"> Próximo decremento: 18
        </label>
        <button type="submit" style="margin-left: 10px;">Salvar</button>
        <button type="button" id="cancelarInserirManual" style="margin-left: 6px;">Cancelar</button>
      </form>
      <div class="mensagem" id="mensagemInserirManual"></div>
    </div>
    <div class="mensagem" id="mensagem"></div>
    <h2>Histórico dos Códigos</h2>
    <div class="historico" id="historicoCodigos"></div>
  </div>

  <!-- Firebase v9 compat (versão para navegador) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  
  <!-- Script principal -->
  <script src="script.js"></script>
</body>
</html>